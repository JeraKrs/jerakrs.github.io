<!DOCTYPE html>
<html>
	<head>
		<!--
		* Author:         Jerakrs
		-->

		<meta charset="utf-8" />

		<title> 使用Github Pages搭建个人博客 | JeraKrs.com</title>

		<meta name="author" content="JeraKrs" />
		<meta name="description" content="JeraKrs's Blog" />
		<meta name="renderer" content="webkit">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0"> <!-- 自适应分辨率 -->

		<link rel="stylesheet" href="/css/default.css" type="text/css" />
		<link rel="shortcut icon" href="/Images/favicon.jpg" type="image/x-icon" />  <!-- 设置图标 -->

		<html xmlns:wb="http://open.weibo.com/wb"> <!-- 微博分享 -->

		<script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>

		</head>

		<body>

			<div class="home-menu">
				<div class="home-menu-info">
					<a class="home-info" href="/">JeraKrs</a>
					<a class="home-follow" href="#" title="Contact Me">+</a>
				</div>

				<div class="home-contact">
					<a href="http://weibo.com/JeraKrs/" target="_blank"><img src="http://www.weibo.com/favicon.ico" alt="" width="22"/></a>
					<a href="https://www.douban.com/people/BearChild-/" target="_blank"><img src="http://www.douban.com/favicon.ico" alt="" width="22"/></a>
					<a href="https://github.com/JeraKrs" target="_blank"><img src="https://github.com/fluidicon.png" alt="" width="22"/></a>
				</div>
			</div>

			<link rel="stylesheet" href="/js/prettify/prettify.css" />

<style type="text/css">
	body { background:#e8e8e8; }
	@media screen and (max-width: 800px){
		body { background:#ffffff; }
	}
</style>

<div id="content">

	<div class="sidemenu">
		<iframe width="100%" height="75" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=75&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=0&isFans=0&uid=1948705855&verifier=46dde484&dpc=1"></iframe>
	</div>

	<div class="blog">
		<h1 class="blog-title"><a href="/note/2016/05/28/Github-Pages.html" title="使用Github Pages搭建个人博客">使用Github Pages搭建个人博客</a></h1>
		<p class="blog-date">2016-05-28</p>

		<p>开始写博客已经有三年了，一开始写博客是因为学习算法，在各种不同的OJ上刷题，然后写题解。后来觉得社区提供的版面样式太单一了，所以萌生了自己搭建博客站点的想法，而且有自己独立的域名也是挺酷的一件事。最近几天跟着网上的教程自己动手搭了博客，所以写篇文章分享下经验。</p>

<h2>Github Pages</h2>

<p>如何使用、安装Git我就不多说了，但是使用<a href="http://pages.github.com/" title="Github Pages">Github Pages</a>，首先要注意的是Github Pages采用的是HTTP协议，不是HTTPS，区别在于HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，所以不要做一些敏感的操作处理，比如发送用户密码；并且Github Pages限制每月带宽为100GB和10000次请求，每个站点有1G的空间，对于个人博客而言绰绰有余了，当然这个限额并不是说超过了就会怎样，只是Github会发邮件建议你将网站搬到其它平台上。</p>

<p>你也可以选择使用<a href="https://cn.wordpress.org/" title="WordPress">WordPress</a>搭建个人博客，WordPress一种使用PHP语言开发的博客平台，用户可以在支持PHP和MySQL数据库的服务器上架设属于自己的网站。</p>

<p>而我选择使用Github Pages是因为以下几个优点：</p>

<ul>
<li>轻量级的博客系统，不需要麻烦的配置</li>
<li>可以使用自己喜欢的编辑器或标记语言，比如<a href="https://maxiang.io/" title="Markdown">Markdown</a></li>
<li>无需自己搭建服务器，免费流量和空间，但每月有限额</li>
<li>可以绑定自己的域名</li>
</ul>


<p>当然，Github Pages也存在局限性：</p>

<ul>
<li>需要一定技术支持，例如使用Git和网页开发经验</li>
<li>静态网页，动态功能必须使用外部服务，例如评论</li>
<li>无法使用数据库，不适于与大型网站</li>
</ul>


<h2>Jekyll</h2>

<p>GitHub Pages为了提供对HTML内容的支持，选择了Jekyll作为模板系统，Jekyll是一个静态站点生成器，它会根据网页源码生成静态文件。它提供了模板、变量、插件等功能，所以可以用来编写整个网站。你可以查看Jekyll的<a href="http://jekyllrb.com/docs/configuration/">官方文档</a>。</p>

<h3>搭建本地 Jekyll 环境</h3>

<p>安装Jekyll是一个很简单的过程。但是有时候因为你的电脑的一些配置，前提环境的问题，又会变得很复杂。所需要的前提环境有：</p>

<ul>
<li>需要安装有Ruby</li>
<li>在Ruby的基础上，安装好RubyGems</li>
<li>Linux, Unix, or Mac OS X</li>
<li>Python</li>
</ul>


<h4>安装Ruby</h4>

<p>在本地安装Ruby，Linux系统下操作：</p>

<pre><code>$ sudo apt-get install ruby2.3.1
</code></pre>

<p>Mac系统下使用homebrew进行安装：</p>

<pre><code>$ brew install ruby
</code></pre>

<p>安装完之后，在终端检查是否安装好。运行ruby -v，查看ruby版本。</p>

<h4>安装 RubyGems</h4>

<p>RubyGems 是一个 Ruby 包的管理工具，就像 Homebrew，npm 等，可以下载 <a href="https://rubygems.org/pages/download">安装包</a>到本地。然后，在终端检查更新：</p>

<pre><code>##可能需要根权限
$ gem update --system

##检查安装情况，输出当前版本
$ gem -v
</code></pre>

<h4>安装 Jekyll</h4>

<p>最好的安装方法应该是通过 RubyGems 来安装，在终端输入：</p>

<pre><code>##可能需要根权限
$ gem install jekyll

##同样在安装完成后输出版本号检查结果
$ jekyll -v
</code></pre>

<p>至此，你已经成功在本地电脑上安装好了 Jekyll。如果你使用Markdown的话，需要安装Markdown的解释器，并且在你的_config.yml里面设置<code>markdown:rdiscount</code></p>

<pre><code>$ gem install jekyll rdiscount
</code></pre>

<h4>Jekyll 的使用</h4>

<p>切换到你的博客目录，输入命令：</p>

<pre><code>$ jekyll serve --watch
</code></pre>

<p>然后就可以通过端口<code>localhost:4000</code>来访问你的主页了。</p>

<h3>Jekyll 模板系统</h3>

<p>Jekyll 其实就是一个文本的转换引擎，使用<a href="https://github.com/shopify/liquid/wiki/liquid-for-designers">Liquid</a>板语言，支持一些标记语言，通过layout将文档拼装在一起展示。Jekyll 有着严格的结构定义：</p>

<pre><code>　　/jekyll_demo
　　　　|--　_config.yml
　　　　|--  _includes
　　　　|--　_layouts
　　　　|　　　|--　default.html 
　　　　|--　_posts
　　　　|　　　|--　2016-05-27-hello-world.html
　　　　|-- _site
　　　　|--  index.html
</code></pre>

<h4>_config.yml</h4>

<p>Jekyll 的配置文件，具体解释参见<a href="http://jekyllrb.com/docs/configuration/">官方文档</a>。</p>

<h4>_includes</h4>

<p>用来存放一些小的可复用的模块，通过<code>{ % include file.ext %}</code>（‘{’后的空格不加，下面同理）活调用。这条命令会调用<strong>_includes/file.ext</strong>文件。</p>

<h4>_layouts</h4>

<p>这是模板文件存放的位置。使用模板需要通过YAML front matter来定义，<code>{ { content }}</code>标记可以将数据插入到这些模板中来。</p>

<h4>_posts</h4>

<p>动态内容，也就是你的博客正文所存放的文件夹。博客文件的命名有严格规定，必须以<code>日期+名称</code>的方式，例如<strong>2016-05-27-XXX.md</strong>。</p>

<p>每篇文章的头部，可以通过一个yaml文件头，来设置一些元数据。它用三根短划线"---"，标记开始和结束，里面每一行设置一种元数据。<code>layout: default</code>，表示该文章的模板使用<strong>_layouts</strong>目录下的<strong>default.html</strong>文件；<code>title: Hello World</code>，表示该文章的标题是"Hello World"，如果不设置这个值，默认使用嵌入文件名的标题，即"hello world"。而文章的分类索引也是通过元数据设定的，<code>category: study</code>。</p>

<pre><code>    ---
    layout: default
    title: Hello World
    category: study
    ---
</code></pre>

<h4>_site</h4>

<p>这个是 Jekyll 运行后生成的最终的文档，不用去关心。</p>

<h4>index.html</h4>

<p>博客的首页，即输入网址后默认显示的页面。</p>

<p>以上是 Jekyll 模板固定的结构，其它的可以根据个人需求自行添加。如果需要实例的话，可以参照我的<a href="https://github.com/JeraKrs/jerakrs.github.io">项目源码</a>。</p>

<h2>关联 Github</h2>

<p>GitHub Pages分两种，一种是你的GitHub用户名建立的<code>username.github.io</code>这样的用户&amp;组织页（站），另一种是依附项目的pages。对于个人博客当然是属于第一种了，使用<code>username.github.io</code>就可以访问的网站，每个用户名下面只能建立一个。</p>

<p>在你的Github主页上创建一个项目，名为<code>username.github.io</code>（注意这里的username是你自己的用户名）。然后与你本地的博客目录绑定，怎么绑定这里就不过说了，和一般Git的使用一样。</p>

<p>每当有文件更新，比如新添加了一遍博客。可以通过：</p>

<pre><code>$ git add --all
$ git commit -m""
$ git push origin master
</code></pre>

<p>将文章推送到主页上。第一次页面生效需要的时间要长一些。</p>

<p>关于第二种项目pages，它和用户pages使用的后台程序是同一套，只不过它的目的是项目的帮助文档等跟项目绑定的内容，所以需要在项目的gh-pages分支上去提交相应的文件，GitHub会自动帮你生成项目pages。</p>

<h2>购买、绑定独立域名</h2>

<p>我的域名是在<a href="http://www.xinnet.com/?utm_source=pc&amp;utm_medium=pz&amp;utm_term=%E6%A0%87%E9%A2%98&amp;utm_content=%E6%A0%87%E9%A2%98&amp;utm_campaign=%E6%A0%87%E9%A2%98%E6%8F%8F%E8%BF%B0">新网</a>上买的，<a href="jerakrs.com">JeraKrs.com</a>。使用哪个服务商其实无所谓，只要能买到喜欢的、有个性的域名就行了。对于个人备案的，建议选择com/net；对于企业级备案的，建议选择cn。选定后注册对应服务商账号，购买想要的域名。</p>

<p>购买完域名之后需要做两个操作，一是在自己的项目根目录下添加一个<strong>CNAME</strong>文件，输入你的域名；二是在自己的域名下添加一条<a href="http://baike.baidu.com/view/65575.htm">A记录</a>，地址就是Github Pages的服务IP地址：  192.30.252.153/154。这个地址可能会变，可以在<a href="https://help.github.com/articles/setting-up-an-apex-domain/">这里</a>查看。如果绑定的是二级域名，则DNS要新建一条CNAME记录，指向username.github.com（将username换成你的用户名）。添加A记录的方法是在购买完域名后，点击解析，会跳转出域名管理的页面。</p>

<h2>使用 Disqus 实现评论功能</h2>

<p>上面提到 Github Pages 通过 Jekyll 生成的页面是静态页面，所以评论功能需要借助外部服务。我选用的是 <a href="https://disqus.com/" title="Disqus">Disqus</a>，而专做评论模块的产品有很多，比如国产的<a href="http://duoshuo.com/" title="多说">多说</a>，它支持国内主流社交网络平台，不过据说有剽窃用户数据的嫌疑。</p>

<p>Disqus 使用起来很方便，注册用户后，点击<code>Admin</code>：</p>

<p><img src="/Images/blogs/note/2016-05-28-01.png" alt="Alt text" /></p>

<p>选择<code>Installing Disqus</code>，会跳转至选择平台的页面，选择<code>Universal Code</code>，Disqus会根据你的账户生成一段代码，复制到你的源码中。</p>

<pre><code>    &lt;div id="disqus_thread"&gt;&lt;/div&gt;
    &lt;script&gt;
    /**
        * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
        * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');

    s.src = '//username.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    &lt;/script&gt;
    &lt;noscript&gt;Please enable JavaScript to view the &lt;a href="https://disqus.com/?ref_noscript" rel="nofollow"&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;
</code></pre>

<p>如果你不喜欢Disqus的样式，也可以根据他生成的HTML结构，自己改写样式覆盖它的。</p>

<h2>代码高亮插件</h2>

<p>如果是写技术博客，代码高亮少不了，我选用的是Google Code Prettify，基本支持任何语言。并且在使用上也很方便，将整个Google Code Prettify的文件夹拷贝到你的项目中，然后只需要在<code>&lt;pre&gt;</code>的标签上加入prettyprint就可以了。</p>

<h2>外部样式</h2>

<p>对于博客的样式呢，网上有很多模板，也有很多大牛的博客可以借鉴。我这里只给大家介绍一个<a href="http://fontawesome.dashgame.com/">FontAwesome</a>一个图标文字库，现在也拓展CSS样式，使用起来很方便。</p>

<h2>结语</h2>

<p>至此，就算介绍完毕了，其实搭建个人不是非常难，只要动手尝试都能成功。</p>


		<!-- 分享 -->
		<div id="share-button" style="float:right; line-height: 22px; height:22px;">
			<b>分享：</b>
			<wb:share-button addition="simple" type="icon" ralateUid="1948705855"></wb:share-button>
		</div>

		<!-- 评论 -->
		<div id="disqus_thread"></div>
		<script>
			(function() {  // DON'T EDIT BELOW THIS LINE
				var d = document, s = d.createElement('script');

				s.src = '//jerakrs.disqus.com/embed.js';

				s.setAttribute('data-timestamp', +new Date());
				(d.head || d.body).appendChild(s);
			})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

	</div>

	<a id="gotop" href="#">
		<span>▲</span>
	</a>
</div>

<script src="/js/post.js" type="text/javascript"></script>
<script src="http://qzonestyle.gtimg.cn/qzone/app/qzlike/qzopensl.js#jsdate=20111201" charset="utf-8"></script>
<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript">
	(function(){
		var p = {
			url:location.href,
			showcount:'1',/*是否显示分享总数,显示：'1'，不显示：'0' */
			desc:'',/*默认分享理由(可选)*/
			summary:'',/*分享摘要(可选)*/
			title:'',/*分享标题(可选)*/
			site:'JeraKrs.com',
			pics:'', /*分享图片的路径(可选)*/
			style:'203',
			width:22,
			height:22
		};
		var s = [];
		for(var i in p){
			s.push(i + '=' + encodeURIComponent(p[i]||''));
		}
		$('#share-button').append(['<a version="1.0" class="qzOpenerDiv" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?',s.join('&'),'" target="_blank" style="margin-top:10px">分享</a>'].join(''));
	})();
</script>


			<script type="text/javascript">
				$(function(){
					$('.home-follow').click(function(e){
						e.preventDefault();
						$('.home-contact').fadeToggle("slow")
					});
				})
			</script>
	</body>
</html>
